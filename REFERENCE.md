# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`hdm`](#hdm): HDM installation main class

#### Private Classes

* `hdm::docker`: A short summary of the purpose of this class
* `hdm::puppet_ruby`: A short summary of the purpose of this class

### Data types

* [`Hdm::Gitdata`](#hdmgitdata): type to enforce git settings for HDM
* [`Hdm::Ldap_settings`](#hdmldap_settings): type to enforce ldap settings for HDM
* [`Hdm::Puppetdb`](#hdmpuppetdb): type to enforce puppetdb settings for HDM

## Classes

### <a name="hdm"></a>`hdm`

This class controls the installation of HDM

#### Examples

##### 

```puppet
include hdm
```

#### Parameters

The following parameters are available in the `hdm` class:

* [`method`](#method)
* [`manage_docker`](#manage_docker)
* [`version`](#version)
* [`port`](#port)
* [`bind_ip`](#bind_ip)
* [`hostname`](#hostname)
* [`hdm_path`](#hdm_path)
* [`git_url`](#git_url)
* [`user`](#user)
* [`group`](#group)
* [`puppetdb_settings`](#puppetdb_settings)
* [`puppet_code_dir`](#puppet_code_dir)
* [`allow_encryption`](#allow_encryption)
* [`read_only`](#read_only)
* [`git_data`](#git_data)
* [`ldap_settings`](#ldap_settings)
* [`hdm_hiera_config_file`](#hdm_hiera_config_file)

##### <a name="method"></a>`method`

Data type: `Enum['docker', 'puppet-ruby']`

Select the installation method.
Avalable methods: docker or puppet-ruby
When using puppet-ruby we install bundler gem into
the puppet-agent ruby installation.

Default value: `'docker'`

##### <a name="manage_docker"></a>`manage_docker`

Data type: `Boolean`

Set to false if this module should NOT
also include the docker class (without any arguments)
Please note that the docker module only works on Debian,
RedHat and windows systems.
SLES users must install and start docker via puppet package
and service resource.

Default value: ``true``

##### <a name="version"></a>`version`

Data type: `String[1]`

Select the version to deploy.
Version is the image tag name when using docker and
the git tag when using puppet-ruby

Default value: `'main'`

##### <a name="port"></a>`port`

Data type: `Stdlib::Port`

The port where HDM should run on

Default value: `3000`

##### <a name="bind_ip"></a>`bind_ip`

Data type: `Stdlib::IP::Address::Nosubnet`

The ip address to bind the process to

Default value: `'0.0.0.0'`

##### <a name="hostname"></a>`hostname`

Data type: `String[1]`

The hostname to use

Default value: `$facts['networking']['fqdn']`

##### <a name="hdm_path"></a>`hdm_path`

Data type: `Stdlib::Unixpath`

Path where one wants to install and configure hdm

Default value: `'/etc/hdm'`

##### <a name="git_url"></a>`git_url`

Data type: `String[1]`

The git URL to clone the hdm repo from

Default value: `'https://github.com/betadots/hdm.git'`

##### <a name="user"></a>`user`

Data type: `String[1]`

The hdm user name

Default value: `'hdm'`

##### <a name="group"></a>`group`

Data type: `String[1]`

The hdm group name

Default value: `'hdm'`

##### <a name="puppetdb_settings"></a>`puppetdb_settings`

Data type: `Hdm::Puppetdb`

A hash to provide information on how
HDM can connect to puppetdb
The following options are possible:
Plain text (default)
```
  {
    'server'           => 'http://localhost:8080',
  }
```
Using PE token:
```
  {
    'server'           => 'https://localhost:8081',
    'token'            => '/etc/hdm/puppetdb.token',
    'cacert'           => '<path to cacert>',
  }
```
Using SSL cert:
```
  {
    'server'           => 'http://localhost:8081',
    'pem'              => {
      'key'            => '/etc/hdm/ssl.key',
      'cert'           => '/etc/hdm/ssl.cert',
      'ca_file'        => '/etc/hdm/ssl.ca',
    },
  }
```

Default value: `{ 'server' => 'http://localhost:8080', }`

##### <a name="puppet_code_dir"></a>`puppet_code_dir`

Data type: `Stdlib::Unixpath`

The path where HDM can find deployed
Puppet environments (similar to puppet config code_dir)
defaults to '/etc/puppetlabs/code'

Default value: `'/etc/puppetlabs/code'`

##### <a name="allow_encryption"></a>`allow_encryption`

Data type: `Boolean`

Specify if HDM should use EYAML
Needs HDM access to EYAML keys (public and private)
Values for keys are taken from hiera.yaml file and can
not be set individually.

Default value: ``false``

##### <a name="read_only"></a>`read_only`

Data type: `Boolean`

Set to false if you want the ability to
change data via HDM webfrontend. WARNING!! untested!!!
Changes are stored via GIT.
Setting this to true also needs the git_data Array parameter

Default value: ``true``

##### <a name="git_data"></a>`git_data`

Data type: `Hdm::Gitdata`

Configure several settings related to the option
to modify data via Webfrontend. WARNING!! untested!!
Required Array of hash data:
```
  [
    {
      'datadir'        => 'modules/hieradata/data',
      'git_url'        => 'git@server:path/repo.git',
      'path_in_repo'   => 'data',
      'ssh_priv_key'   => '.ssh/id_rsa',
    }
  ]
```

Default value: `[]`

##### <a name="ldap_settings"></a>`ldap_settings`

Data type: `Hdm::Ldap_settings`

Config for LDAP integration
Needs the following Hash:
```
  {
    'host'             => 'localhost',
    'port'             => 389,
    'base_dn'          => 'ou=hdm,dc=nodomain',
    'bind_dn'          => 'cn=admin,dc=nodomain',
    'bind_dn_password' => 'openldap',
  }
```

Default value: `{}`

##### <a name="hdm_hiera_config_file"></a>`hdm_hiera_config_file`

Data type: `String[1]`

Set to another file if you
want HDM to not use hiera.yaml.

Default value: `'hiera.yaml'`

## Data types

### <a name="hdmgitdata"></a>`Hdm::Gitdata`

type to enforce git settings for HDM

Alias of

```puppet
Array[Optional[Struct[
    {
      datadir                => Stdlib::Unixpath,
      git_url                => String[1],
      path_in_repo           => String[1],
      Optional[ssh_priv_key] => String[1],
    }
  ]]]
```

### <a name="hdmldap_settings"></a>`Hdm::Ldap_settings`

type to enforce ldap settings for HDM

Alias of

```puppet
Struct[{
    Optional[host]             => Stdlib::Host,
    Optional[port]             => Stdlib::Port,
    Optional[base_dn]          => String[1],
    Optional[bind_dn]          => String[1],
    Optional[bind_dn_password] => String[1],
  }]
```

### <a name="hdmpuppetdb"></a>`Hdm::Puppetdb`

type to enforce puppetdb settings for HDM

Alias of

```puppet
Struct[{
    server           => Stdlib::Httpurl,
    Optional[pem]    => Struct[
      {
        key     => Stdlib::Unixpath,
        cert    => Stdlib::Unixpath,
        ca_file => Stdlib::Unixpath,
      }
    ],
    Optional[token]  => Stdlib::Unixpath,
    Optional[cacert] => Stdlib::Unixpath,
  }]
```

